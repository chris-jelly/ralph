{
  "project": "ralph",
  "branchName": "ralph/install-path-expansion",
  "description": "Enhance Ralph install script to support home directory notation (~), environment variables, and relative paths with proper validation and error handling",
  "userStories": [
    {
      "id": "US-001",
      "title": "Add path expansion utility function",
      "description": "As a developer, I need a robust path expansion function that handles ~, environment variables, and relative paths so that all path formats work consistently",
      "acceptanceCriteria": [
        "Create expand_path() function in install.sh that expands ~ to $HOME",
        "Function expands common environment variables ($HOME, $USER, $PWD, etc.)",
        "Function converts relative paths to absolute paths using realpath or similar",
        "Function returns the fully resolved absolute path",
        "Typecheck/lint passes (shellcheck if available)"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Apply path expansion to TARGET_DIR parameter",
      "description": "As a user, I want to use ~ notation and environment variables in --target path so that I can easily specify paths like ~/git/my-repo",
      "acceptanceCriteria": [
        "TARGET_DIR input is processed through expand_path() after argument parsing",
        "Paths like ~/git/repo correctly expand to /home/username/git/repo",
        "Environment variables like $HOME/git/repo work correctly",
        "Relative paths like ../other-repo are converted to absolute paths",
        "Interactive mode prompts also support expanded paths",
        "Typecheck/lint passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Apply path expansion to RALPH_DIR_NAME parameter",
      "description": "As a user, I want to use ~ notation and environment variables in --ralph-dir path so that I can specify custom installation locations flexibly",
      "acceptanceCriteria": [
        "RALPH_DIR_NAME input is processed through expand_path() after argument parsing",
        "Supports ~ notation, environment variables, and relative paths",
        "Handles both standalone paths and paths relative to TARGET_DIR correctly",
        "Interactive mode prompts also support expanded paths",
        "Typecheck/lint passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Add path validation with clear error messages",
      "description": "As a user, I want clear error messages when I provide invalid paths so that I can quickly fix any issues without confusion",
      "acceptanceCriteria": [
        "Validate that expanded TARGET_DIR exists before proceeding",
        "If TARGET_DIR doesn't exist, show error: 'Error: Target directory '[path]' does not exist after expansion. Please check the path.'",
        "Show both original input and expanded path in error messages for clarity",
        "Validate that parent directory of RALPH_DIR_NAME exists (or can be created)",
        "If parent directory doesn't exist, show helpful error message",
        "All validation failures exit with non-zero status code",
        "Typecheck/lint passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Implemented strict validation for TARGET_DIR existence and RALPH_DIR_NAME parent existence (for external paths)"
    },
    {
      "id": "US-005",
      "title": "Update documentation with path format examples",
      "description": "As a user, I want clear documentation showing all supported path formats so that I know how to use the install script effectively",
      "acceptanceCriteria": [
        "Update ralph/install.sh help message (show_help function) with path format examples",
        "Add examples section showing: absolute paths, ~ notation, environment variables, relative paths",
        "Include example: --target ~/git/my-repo",
        "Include example: --target $HOME/projects/app",
        "Include example: --target ../other-repo",
        "Update ralph/README.md installation section with path format examples",
        "Add note that relative paths are converted to absolute for clarity",
        "Typecheck/lint passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Add test cases for path expansion",
      "description": "As a developer, I want automated tests for path expansion functionality so that future changes don't break this feature",
      "acceptanceCriteria": [
        "Create test script (tests/test_install_paths.sh or similar) that validates path expansion",
        "Test case: ~ expands to home directory",
        "Test case: $HOME variable expands correctly",
        "Test case: Relative path ../test converts to absolute",
        "Test case: Already absolute path remains unchanged",
        "Test case: Invalid path produces expected error message",
        "Test case: Mixed format like ~/projects/$USER works correctly",
        "All tests pass when run",
        "Typecheck/lint passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    }
  ]
}
